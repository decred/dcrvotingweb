<!-- CAUTION: This is a professionally uglified proof-of-concept by karamble. Base for discussion, let me know your thoughts. -->
{{define "home"}}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Hardfork Demo of Decred Cryptocurrency">
    <meta name="author" content="Decred Developer">
    <link rel="icon" href="favicon.ico">
    <title>Hardfork Demo</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
  <!--  Custom favicon  -->
  <link rel="apple-touch-icon" sizes="180x180" href="./content/images/favicon/apple-touch-icon.png?v=fi5jKKtbwv">
  <link rel="icon" type="image/png" href="./content/images/favicon/favicon-32x32.png?v=fi5jKKtbwv" sizes="32x32">
  <link rel="icon" type="image/png" href="./content/images/favicon/favicon-16x16.png?v=fi5jKKtbwv" sizes="16x16">
  <link rel="manifest" href="./content/images/favicon/manifest.json?v=fi5jKKtbwv">
  <link rel="mask-icon" href="./content/images/favicon/safari-pinned-tab.svg?v=fi5jKKtbwv" color="#2973ff">
  <link rel="shortcut icon" href="./content/images/favicon/favicon.ico?v=fi5jKKtbwv">
  <meta name="apple-mobile-web-app-title" content="deCRED - decentralised credit">
  <meta name="application-name" content="deCRED - decentralised credit">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="js/Chart.min.js"></script>
  </head>
  <body>
    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">
        <svg class="svg-logo">
        <use xlink:href="images/sprites.svg#svg-decred-logo" />
        </svg>
      </a>
        </div>
<!--        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#infos">Infos</a></li>
          </ul>
        </div> --> <!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
<br /><br /><br />	<h1>Decred Hardfork Demonstration on Testnet</h1>



<!-- INTRODUCTION TEXT -->
<div class="row">
<div class="col-md-6">
<p>When {{.BlockVersionThreshold}}% of the Blocks (PoW) and Votes (PoS) in a rolling {{.BlockVersionWindowLength}} Block Window (SVI) are on the latest version, this new votebit version can be locked in.</p>
<p>At that point, nodes will begin rejecting blocks and votes with any version less than the latest one.</p>
</div>

<!-- OVERALL STATISTICS -->
<div class="col-md-6">
<blockquote>Current Consensus Ruleset: v3
<br />
Blockheight: {{.BlockHeight}}
<br />
PoW Miners on latest Block Version: <span style="color:#2ED6A1;">95%</span>
<br />
PoS Miners on latest Votebits: <span style="color:#FD714A;">80%</span>
</blockquote>
</div>
</div>



<!-- BEGIN STEP 1 BLOCK AND VOTEBIT VERSION TRESHOLD 95% -->
<h4><span>Step 1</span></h4>


<!-- BEGIN POW TRESHOLD CHART 144 BLOCKS WINDOW DATAPOINTS -->
<div class="row">
<div class="col-md-8">
<h3>Block Version (PoW)</h3>
<p>Block Versions generated by PoW miners.</p>
<!-- FIRST CHART -->

<canvas id="blockVersions" width="400" height="200"></canvas>
<script>

  var blockVersionGraphColors = ['','','75,192,192','41,113,255']
  var ctx = document.getElementById("blockVersions");
  var myChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: {{.BlockVersionsHeights}},
      datasets: [
      {{range $i, $element := .BlockVersions}}
        {
            label: "Block v"+{{$i}},
            fill: true,
            lineTension: 0.1,
            backgroundColor: "rgba("+blockVersionGraphColors[{{$i}}-1]+",0.4)",
            borderColor: "rgba("+blockVersionGraphColors[{{$i}}-1]+",1)",
            borderCapStyle: 'butt',
            borderDash: [],
            borderDashOffset: 0.0,
            borderJoinStyle: 'miter',
            pointBorderColor: "rgba("+blockVersionGraphColors[{{$i}}-1]+",1)",
            pointBackgroundColor: "#fff",
            pointBorderWidth: 1,
            pointHoverRadius: 5,
            pointHoverBackgroundColor: "rgba("+blockVersionGraphColors[{{$i}}-1]+",1)",
            pointHoverBorderColor: "rgba(220,220,220,1)",
            pointHoverBorderWidth: 2,
            pointRadius: 1,
            pointHitRadius: 10,
            data: {{.RollingWindowLookBacks}},
            spanGaps: false,
        },
      {{end}}
        /*
        {
            label: "Block v3",
            fill: true,
            lineTension: 0.1,
            backgroundColor: "rgba(41,113,255,0.4)",
            borderColor: "rgba(41,113,255,1)",
            borderCapStyle: 'butt',
            borderDash: [],
            borderDashOffset: 0.0,
            borderJoinStyle: 'miter',
            pointBorderColor: "rgba(75,192,192,1)",
            pointBackgroundColor: "#fff",
            pointBorderWidth: 1,
            pointHoverRadius: 5,
            pointHoverBackgroundColor: "rgba(75,192,192,1)",
            pointHoverBorderColor: "rgba(220,220,220,1)",
            pointHoverBorderWidth: 2,
            pointRadius: 1,
            pointHitRadius: 10,
            data: [0, 20, 40, 50, 60, 70, 85],
            spanGaps: false,
        }
        */]
    },
    options: {
	  title: {
      display: true,
      text: 'PoW Block Versions',
	    fontColor: '#FFF'
    },
    scales: {
      yAxes: [{
        ticks: {
          beginAtZero:true,
			    fontColor: '#FFF'
        }
      }],
	    xAxes: [{
        ticks: {
          autoSkipPadding: 50,
          beginAtZero:true,
			    fontColor: '#FFF',
          reverse: true,
        }
      }]
    }
  }
});
</script>
</div>


<!-- BEGIN POW BAR LAST 144 BLOCKS -->
<div class="col-md-4">
<canvas id="blockVersionsIndicator" width="400" height="510"></canvas>
</div>
<script>
var config = {
  type: 'bar',
  data: {
    labels: ["Last {{.BlockVersionWindowLength}} Blocks"],
    datasets: [
    {{range $i, $element := .BlockVersions}}
    {{$length := minus (len $element.RollingWindowLookBacks) 1}}
      {
      type: 'bar',
      label: 'Block v{{$i}}',
      backgroundColor: "rgba("+blockVersionGraphColors[{{$i}}-1]+",1)",
      data: [{{index $element.RollingWindowLookBacks $length}}],
      }, 
    {{end}}
    ]
  },
  options: {
    scales: {
      xAxes: [{
        stacked: true
      }],
      yAxes: [{
        stacked: true
      }]
    }
  }
};

var ctx = document.getElementById("blockVersionsIndicator").getContext("2d");
new Chart(ctx, config);
</script>
</div>


<!-- 95% Treshold reached alertbox -->
<div clas="row">
<dic class="col-md-12">
<br /><br />
<div class="alert alert-success">
  <strong>Success!</strong> During the last {{.BlockVersionWindowLength}} Blocks we have reached the minimum of XX% Blocks which are on the latest Block Version <strong>v3</strong>
</div>
</div>



<div class="row">
<div class="col-md-8">
<h3>Stake Version (PoS)</h3>
<p>Votebit Versions generated by PoS Miners</p>
<!-- SECOND CHART VOTE VERSIONS / SVI -->
<div style="width: 100%; height:350px;">
<canvas id="voteVersions" width="400" height="200"></canvas>
</div>
<script>
var cty = document.getElementById("voteVersions");
var myChart = new Chart(cty, {
    type: 'line',
    data: {
        labels: ["105600", "105601", "105602", "105603", "105604", "105605", "105606"],
    datasets: [
        {
            label: "Votebits v2",

            fill: true,
            lineTension: 0.1,
            backgroundColor: "rgba(75,192,192,0.4)",
            borderColor: "rgba(75,192,192,1)",
            borderCapStyle: 'butt',
            borderDash: [],
            borderDashOffset: 0.0,
            borderJoinStyle: 'miter',
            pointBorderColor: "rgba(75,192,192,1)",
            pointBackgroundColor: "#fff",
            pointBorderWidth: 1,
            pointHoverRadius: 5,
            pointHoverBackgroundColor: "rgba(75,192,192,1)",
            pointHoverBorderColor: "rgba(220,220,220,1)",
            pointHoverBorderWidth: 2,
            pointRadius: 1,
            pointHitRadius: 10,
            data: [65, 59, 80, 81, 56, 55, 40],
            spanGaps: false,
        },
        {
            label: "Votebits v3",
            fill: true,
            lineTension: 0.1,
            backgroundColor: "rgba(41,113,255,0.4)",
            borderColor: "rgba(41,113,255,1)",
            borderCapStyle: 'butt',
            borderDash: [],
            borderDashOffset: 0.0,
            borderJoinStyle: 'miter',
            pointBorderColor: "rgba(75,192,192,1)",
            pointBackgroundColor: "#fff",
            pointBorderWidth: 1,
            pointHoverRadius: 5,
            pointHoverBackgroundColor: "rgba(75,192,192,1)",
            pointHoverBorderColor: "rgba(220,220,220,1)",
            pointHoverBorderWidth: 2,
            pointRadius: 1,
            pointHitRadius: 10,
            data: [12, 23, 23, 51, 71, 34, 86],
            spanGaps: false,
        }]
    },
    options: {
	title: {
            display: true,
            text: 'Vote Versions / SVI / Stake version Interval',
	    fontColor: '#FFF'
        },
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true,
			    fontColor: '#FFF'
                }
            }],
	xAxes: [{
                ticks: {
                    beginAtZero:true,
			    fontColor: '#FFF'
                }
            }]
        }
    }
});
</script>
</div>


<!-- BEGIN POW BAR LAST 144 BLOCKS -->
<div class="col-md-4">
<canvas id="voteVersionsIndicator" width="400" height="510"></canvas>
</div>
<script>
var config = {
  type: 'bar',
  data: {
    labels: ["Last 144 Blocks"],
    datasets: [{
      type: 'bar',
      label: 'Votebit v2',
      backgroundColor: "#FD714A",
      data: [137],
    }, {
      type: 'bar',
      label: 'Votebit v3',
      backgroundColor: "#41BF53",
      data: [7]
    }]
  },
  options: {
    scales: {
      xAxes: [{
        stacked: true
      }],
      yAxes: [{
        stacked: true
      }]
    }
  }
};

var ctx = document.getElementById("voteVersionsIndicator").getContext("2d");
new Chart(ctx, config);
</script>
</div>


<!-- 95% Treshold reached alertbox -->
<div clas="row">
<dic class="col-md-12">
<br /><br />
<div class="alert alert-danger">
  <strong>Danger!</strong> PoS Miners please upgrade your Software. 95% of the Votes during the 144 Blocks Window are outdated.
</div>
</div>

<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />

<!-- BEGIN STEP 1 BLOCK AND VOTEBIT VERSION TRESHOLD 95% -->
<h4><span>Step 2</span></h4>


<!-- INTRODUCTION TEXT -->
<div class="row">
<div class="col-md-6">
<p>After the network made sure that 95% of the PoS and PoW Miners are up2date the actual Voting on a Agenda can take place.</p>
<p>On Testnet we have a Voting Window of 5040 Blocks (around one Week). In this time there can be made 25200 Votes (5 votes per Block).</p>
<p>Users can vote either yes, no or abstain. The wallet abstains per default, users have to set their votebits on purpose.</p>
<p>We have a Quorum of 10%. This means a minimum of 2520 votes have to be done (10% of all votes during the voting window) and have to vote either YES or NO. Otherwise the voting  is invalid.</p>
<p>When less than 10% actively placed a vote the voting is canceled and will be reinitiated until the expiration date</p>

<h3>Quorum:</h3>
<!-- QUORUM HORIZONTAL BARCHART -->
<canvas id="voteQuorum" width="400" height="100"></canvas>
<script>
var configcta = {
  type: 'horizontalBar',
  data: {
labels: ["Voted vs. Abstained"],
    datasets: [{
	type: 'horizontalBar',
	label: 'Voted',
	data: [9],
	backgroundColor: '#41BF53',
	}, {
	type: 'horizontalBar',
	label: 'Abstained',
	data: [91],
	backgroundColor: '#FD714A'
        }]
  }
};

var cta = document.getElementById("voteQuorum");
new Chart(cta, configcta);
</script>

<div class="alert alert-danger">
  <strong>Danger!</strong> We have yet not reached the minimum Quorum of 10% actively made votes.
</div>
</div>

<!-- OVERALL STATISTICS -->
<div class="col-md-6">
<blockquote>Agenda ID: #3244 <- link to forum posting or rfp portal
<br />
Agenda Title: Block Expansion to 1MB <- same link again
<br />
Voting Window: Block 100000-105040
<br />
Blocks left for voting: 2300
<br />
Expiration Block: 110080
<h3>Voting Progress:</h3>
<canvas id="voteProgress" width="100" height="100"></canvas>
<script>
var configctu = {
  type: 'doughnut',
  data: {
labels: ["No","Yes","Abstain"],
    datasets: [{
            data: [300, 50, 100],
            backgroundColor: [
                "#FD714A",
                "#41BF53",
                "#69D3F5"
            ],
            hoverBackgroundColor: [
                "#0C1E3E",
                "#2ED6A1",
                "#2971FF"
            ]
        }]
  }
};

var ctu = document.getElementById("voteProgress");
new Chart(ctu, configctu);
</script>



<!-- BEGIN VOTE RESULTS DOUGHNUT CHART --->






</blockquote>
</div>
</div>





</div>

    </div> <!-- /container -->
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery.min.js"><\/script>')</script>
    <script src="js/bootstrap.min.js"></script>

  </body>
</html>
{{end}}
